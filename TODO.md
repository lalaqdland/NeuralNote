# NeuralNote 开发任务清单

> 项目进度跟踪文档 - 记录开发任务、里程碑和检查点

## 文档说明

- **更新频率**：每完成一个任务就更新状态
- **标记规则**：
  - ✅ 已完成
  - 🚧 进行中
  - ⏳ 待开始
  - ⚠️ 阻塞/等待
- **重要提示**：完成任务后，请记得更新 `docs/03_Logs/DevLog.md`

---

## 📊 总体进度

```
MVP阶段进度: ██████████░░░░░░░░░░░░░░░░ 40% (41/103)
├── 基础设施: ████████████████████████░░ 89% (16/18)
├── 核心功能: ███████████░░░░░░░░░░░░░░░ 43% (6/14)
└── 用户体验: ██████████████░░░░░░░░░░░░ 56% (18/32)
```

> 💡 **说明**：
> - 进度条根据底部「📈 进度统计」表格手动更新
> - 每完成一个任务，请在对应任务前标记 ✅，并更新底部统计表
> - █ = 已完成，░ = 未完成（每个字符代表 4%）

---

## 🎯 第一阶段：基础设施搭建

### 1.1 开发环境配置

- [x] **1.1.1** 配置 Python 开发环境 ✅
  - [x] ~~安装 Python 3.11+~~ (系统已有 Python 3.14.0)
  - [x] ~~配置虚拟环境 (venv/conda)~~ (已创建venv)
  - [x] ~~安装基础依赖包 (fastapi, uvicorn, sqlalchemy)~~ (已安装 FastAPI 0.128, SQLAlchemy 2.0.46, Uvicorn 0.40)
  - [x] ~~配置代码格式化工具 (black, isort)~~ (已安装 Black 26.1, isort 7.0)
  - [x] ~~配置代码检查工具 (flake8, mypy)~~ (已安装 Flake8 7.3, Mypy 1.19)
  
  > 📓 **记得更新 DevLog**：记录环境配置过程中遇到的问题和解决方案

- [ ] **1.1.2** 配置前端开发环境 ✅
  - [x] ~~初始化 React 项目 (Vite)~~ (已创建 src/frontend)
  - [x] ~~配置 TypeScript~~ (已配置 tsconfig.json)
  - [x] ~~安装状态管理 (Redux Toolkit)~~ (已安装 @reduxjs/toolkit, react-redux)
  - [x] ~~配置路由 (React Router)~~ (已配置 v7路由)
  - [x] ~~安装 UI 组件库~~ (已安装 Ant Design)
  
  > 📓 **记得更新 DevLog**：记录前端框架选择和配置的决策

- [ ] **1.1.3** 配置数据库环境 ✅
  - [x] ~~安装 PostgreSQL 15~~ ✅ Docker容器
  - [x] ~~安装 PgVector 扩展~~ ✅ 已安装
  - [x] ~~创建项目数据库~~ ✅ neuralnote_dev
  - [x] ~~配置数据库连接~~ ✅ localhost:15432
  
  > 📓 **记得更新 DevLog**：记录数据库安装和配置过程中遇到的问题

- [x] **1.1.4** 配置版本控制和协作 ✅
  - [x] ~~初始化 Git 仓库~~ (已有远程仓库)
  - [x] ~~配置 .gitignore~~ ✅ 已完成
  - [x] ~~创建分支策略 (main/dev/feature)~~ ✅ 已创建dev分支
  - [ ] 配置 Commit Message 规范

### 1.2 基础架构搭建

- [x] **1.2.1** 后端项目结构搭建 ✅
  - [x] ~~创建 FastAPI 应用骨架~~ ✅ 已完成
  - [x] ~~配置 CORS 中间件~~ ✅ 已完成
  - [x] ~~配置日志系统~~ ✅ 已完成
  - [x] ~~配置异常处理~~ ✅ 已完成
  - [x] ~~创建基础目录结构~~ ✅ 已完成
  
  > 📓 **记得更新 DevLog**：记录项目结构设计决策

- [x] **1.2.2** 数据库模型实现 ✅
  - [x] ~~实现 users 用户表模型~~ ✅ 已完成
  - [x] ~~实现 knowledge_graphs 知识图谱表模型~~ ✅ 已完成
  - [x] ~~实现 memory_nodes 记忆节点表模型~~ ✅ 已完成
  - [x] ~~实现 node_tags 标签关联表模型~~ ✅ 已完成
  - [x] ~~实现 node_relations 关联表模型~~ ✅ 已完成
  - [x] ~~实现 review_logs 复习记录表模型~~ ✅ 已完成
  
  > 📓 **记得更新 DevLog**：记录数据库设计中遇到的挑战和解决方案

- [ ] **1.2.3** Docker 容器化配置 🚧
  - [x] ~~编写 docker-compose.yml~~ ✅ 已完成（PostgreSQL + Redis + pgAdmin）
  - [ ] 编写 Dockerfile (后端)
  - [ ] 编写 Dockerfile (前端)
  - [ ] 配置 Nginx 反向代理
  - [x] ~~编写环境变量模板~~ ✅ 已完成（.env.example）
  
  > 📓 **记得更新 DevLog**：记录容器化过程中遇到的问题

- [ ] **1.2.4** CI/CD 基础配置
  - [ ] 配置 GitHub Actions/GitLab CI
  - [ ] 编写自动化测试流程
  - [ ] 配置代码质量检查

---

## 🎯 第二阶段：用户系统

### 2.1 认证模块

- [x] **2.1.1** 用户注册功能 ✅
  - [x] ~~实现注册 API 接口~~ ✅ 已完成
  - [x] ~~密码哈希加密~~ ✅ 已完成（bcrypt）
  - [x] ~~邮箱格式验证~~ ✅ 已完成
  - [x] ~~用户名唯一性检查~~ ✅ 已完成
  - [ ] 发送验证邮件（V2功能）
  
  > 📓 **记得更新 DevLog**：记录注册流程设计和安全考量

- [x] **2.1.2** 用户登录功能 ✅
  - [x] ~~实现登录 API 接口~~ ✅ 已完成
  - [x] ~~JWT Token 生成~~ ✅ 已完成
  - [x] ~~Token 刷新机制~~ ✅ 已完成
  - [ ] 登录日志记录（V2功能）
  
  > 📓 **记得更新 DevLog**：记录 Token 策略选择（JTI黑名单等）

- [x] **2.1.3** 密码管理 ✅
  - [x] ~~密码重置功能~~ ✅ 已完成
  - [x] ~~密码强度校验~~ ✅ 已完成
  - [x] ~~修改密码功能~~ ✅ 已完成

- [ ] **2.1.4** 第三方登录（可选 V2）
  - [ ] 微信登录集成（推荐，国内用户主流）
  - [ ] 手机号验证码登录（快捷登录方式）
  
  > 💡 **说明**：
  > - 微信登录：使用微信开放平台 API，用户可用微信扫码或授权登录
  > - 手机号登录：发送短信验证码，无需记密码，更便捷
  > - OAuth2.0：这是第三方登录的标准协议，微信登录就是基于 OAuth2.0 实现的
  > - 不需要 GitHub 登录（主要面向国外用户，国内用户较少使用）

### 2.2 用户管理

- [x] **2.2.1** 用户信息管理 ✅
  - [x] ~~获取用户信息 API~~ ✅ 已完成
  - [x] ~~更新用户信息 API~~ ✅ 已完成
  - [ ] 头像上传功能
  
  > 📓 **记得更新 DevLog**：记录用户信息存储策略

- [ ] **2.2.2** 订阅管理
  - [ ] 订阅计划查询
  - [ ] 订阅状态更新
  - [ ] 订阅到期提醒

---

## 🎯 第三阶段：核心功能实现

### 3.1 文件上传模块

- [ ] **3.1.1** 图片预处理服务
  - [ ] 图片压缩
  - [ ] 格式转换
  - [ ] 生成缩略图
  - [ ] 图片去噪处理
  
  > 📓 **记得更新 DevLog**：记录图片处理策略和库选择

- [x] **3.1.2** OSS 集成 ✅
  - [x] ~~阿里云 OSS 配置~~ ✅ 已完成（可选）
  - [x] ~~上传接口实现~~ ✅ 已完成
  - [ ] CDN 加速配置
  - [x] ~~文件管理 API~~ ✅ 已完成（列表、详情、更新、删除）
  
  > 📓 **记得更新 DevLog**：记录 OSS 选择和配置决策

- [ ] **3.1.3** 上传进度追踪
  - [ ] WebSocket 实时进度
  - [ ] 断点续传支持
  - [ ] 失败重试机制

### 3.2 OCR 识别模块

- [x] **3.2.1** OCR 服务集成 ✅
  - [x] ~~百度 OCR API 集成~~ ✅ 已完成并配置
  - [ ] 腾讯 OCR API 集成（V2功能）
  - [ ] 多引擎投票机制（V2功能）
  
  > 📓 **记得更新 DevLog**：记录 OCR 服务选择和多引擎融合策略

- [ ] **3.2.2** 数学公式识别
  - [ ] LaTeX 格式转换
  - [ ] 公式渲染验证
  - [ ] 识别准确率测试

- [ ] **3.2.3** OCR 结果校正
  - [ ] 置信度筛选
  - [ ] 手动校正界面
  - [ ] 校正结果回传

### 3.3 AI 分析模块

- [x] **3.3.1** LLM 服务集成 ✅
  - [x] ~~DeepSeek API 集成~~ ✅ 已完成并配置
  - [x] ~~OpenAI GPT-4 API 集成~~ ✅ 已完成（待配置）
  - [ ] 流式响应支持（V2功能）
  
  > 📓 **记得更新 DevLog**：记录 LLM 服务选择和成本控制策略

- [x] **3.3.2** AI 解答生成 ✅
  - [x] ~~题目理解模块~~ ✅ 已完成
  - [x] ~~解答生成模块~~ ✅ 已完成
  - [x] ~~记忆点提取~~ ✅ 已完成
  - [x] ~~知识点标签生成~~ ✅ 已完成
  
  > 📓 **记得更新 DevLog**：记录提示词优化和结果质量调优

- [x] **3.3.3** 向量化处理 ✅
  - [x] ~~文本向量化~~ ✅ 已完成（OpenAI Embedding）
  - [x] ~~PgVector 存储~~ ✅ 已完成（数据库模型支持）
  - [ ] 相似度搜索（待实现）
  
  > 📓 **记得更新 DevLog**：记录向量数据库配置和索引策略

- [ ] **3.3.4** 结果缓存机制
  - [ ] 题目哈希计算
  - [ ] 缓存键设计
  - [ ] 缓存有效期设置

### 3.4 知识图谱模块

- [x] **3.4.1** 图谱数据结构 ✅
  - [x] ~~节点数据结构设计~~ ✅ 已完成
  - [x] ~~边数据结构设计~~ ✅ 已完成
  - [x] ~~位置坐标存储~~ ✅ 已完成（JSONB）
  
  > 📓 **记得更新 DevLog**：记录图谱数据模型设计决策

- [x] **3.4.2** 节点 CRUD 操作 ✅
  - [x] ~~创建节点 API~~ ✅ 已完成
  - [x] ~~查询节点 API~~ ✅ 已完成（列表、详情、分页）
  - [x] ~~更新节点 API~~ ✅ 已完成
  - [x] ~~删除节点 API~~ ✅ 已完成
  - [ ] 批量操作 API（V2功能）

- [x] **3.4.3** 关联管理 ✅
  - [x] ~~创建关联 API~~ ✅ 已完成
  - [x] ~~删除关联 API~~ ✅ 已完成
  - [x] ~~关联类型枚举~~ ✅ 已完成
  - [x] ~~关联强度计算~~ ✅ 已完成

- [ ] **3.4.4** 智能归类
  - [ ] 归类方案预测
  - [ ] 相似节点推荐
  - [ ] 用户确认流程
  
  > 📓 **记得更新 DevLog**：记录智能归类算法设计和调优

### 3.5 图谱可视化

- [ ] **3.5.1** 2D 图谱渲染
  - [ ] D3.js/Cytoscape.js 集成
  - [ ] 力导向布局实现
  - [ ] 节点交互功能
  - [ ] 连线交互功能
  
  > 📓 **记得更新 DevLog**：记录图谱可视化库选择和性能优化

- [ ] **3.5.2** 3D 图谱渲染
  - [ ] Three.js 集成
  - [ ] 3D 力导向布局
  - [ ] 视角控制
  - [ ] 3D 动画效果

- [ ] **3.5.3** 视图管理
  - [ ] 布局算法切换
  - [ ] 颜色主题切换
  - [ ] 视图保存/加载
  - [ ] 视图分享功能

---

## 🎯 第四阶段：复习管理系统

### 4.1 记忆追踪

- [ ] **4.1.1** 复习状态记录
  - [ ] 复习时间记录
  - [ ] 掌握反馈收集
  - [ ] 复习时长统计
  
  > 📓 **记得更新 DevLog**：记录复习数据采集方案

- [ ] **4.1.2** 遗忘曲线计算
  - [ ] SM-2 算法实现
  - [ ] 难度权重调整
  - [ ] 掌握状态映射
  
  > 📓 **记得更新 DevLog**：记录遗忘曲线算法设计和参数调优

- [ ] **4.1.3** 遗忘指数可视化
  - [ ] 颜色标注系统
  - [ ] 节点着色逻辑
  - [ ] 颜色方案切换

### 4.2 复习功能

- [ ] **4.2.1** 复习队列生成
  - [ ] 图谱遍历模式
  - [ ] 随机抽查模式
  - [ ] 集中攻克模式
  - [ ] 间隔重复模式
  
  > 📓 **记得更新 DevLog**：记录复习模式设计和选择依据

- [ ] **4.2.2** 复习提醒
  - [ ] 复习时机计算
  - [ ] 推送通知服务
  - [ ] 邮件提醒

- [ ] **4.2.3** 复习统计
  - [ ] 复习进度统计
  - [ ] 掌握率分析
  - [ ] 统计图表展示

---

## 🎯 第五阶段：用户体验优化

### 5.1 界面优化

- [ ] **5.1.1** 响应式布局
  - [ ] 桌面端适配
  - [ ] 平板端适配
  - [ ] 移动端适配

- [ ] **5.1.2** 交互优化
  - [ ] 加载状态优化
  - [ ] 动画效果添加
  - [ ] 错误提示优化
  - [ ] 空状态处理

- [ ] **5.1.3** 主题切换
  - [ ] 温馨花园风格
  - [ ] 知识星云风格
  - [ ] 清新现代风格
  - [ ] 主题持久化

### 5.2 性能优化

- [ ] **5.2.1** 前端性能
  - [ ] 代码分割
  - [ ] 图片懒加载
  - [ ] 虚拟列表
  - [ ] 缓存策略

- [ ] **5.2.2** 后端性能
  - [ ] 数据库索引优化
  - [ ] 查询缓存
  - [ ] 异步处理

### 5.3 跨学科检测

- [ ] **5.3.1** 学科分类
  - [ ] AI 学科预测
  - [ ] 置信度计算
  - [ ] 阈值设置

- [ ] **5.3.2** 友善提醒
  - [ ] 提醒界面设计
  - [ ] 用户决策处理
  - [ ] 跨学科标记

---

## 🎯 第六阶段：测试与发布

### 6.1 测试

- [ ] **6.1.1** 单元测试 🚧
  - [ ] 后端单元测试（pytest框架已配置）
  - [ ] 前端单元测试
  - [ ] 覆盖率 > 80%

- [x] **6.1.2** 集成测试 ✅
  - [x] ~~API 接口测试~~ ✅ 已完成（test_api.py）
  - [x] ~~数据库操作测试~~ ✅ 已完成
  - [ ] 第三方服务集成测试（待完善）

- [ ] **6.1.3** E2E 测试
  - [ ] 关键流程测试
  - [ ] 用户场景测试

### 6.2 安全

- [ ] **6.2.1** 安全审计
  - [ ] 依赖漏洞扫描
  - [ ] 代码安全检查
  - [ ] 渗透测试

- [ ] **6.2.2** 安全加固
  - [ ] API 限流
  - [ ] SQL 注入防护
  - [ ] XSS 防护
  - [ ] CORS 配置

### 6.3 部署

- [ ] **6.3.1** 生产环境部署
  - [ ] 服务器配置
  - [ ] 域名配置
  - [ ] SSL 证书配置
  - [ ] 监控告警配置

- [ ] **6.3.2** 发布流程
  - [ ] 版本号规范
  - [ ] 更新日志编写
  - [ ] 回滚方案准备

---

## 📋 开发检查清单

在每次开发会话开始前，请检查：

- [ ] **代码同步**
  - [ ] 本地代码已更新到最新 (git pull)
  - [ ] 分支名称正确

- [ ] **任务确认**
  - [ ] 清楚当前要完成的任务
  - [ ] 任务已分解为可执行的小步骤

- [ ] **文档准备**
  - [ ] 相关设计文档已阅读
  - [ ] API 接口定义已确认

- [ ] **环境就绪**
  - [ ] 数据库连接正常
  - [ ] 第三方服务密钥已配置
  - [ ] 本地服务可以启动

在每次开发会话结束后，请检查：

- [ ] **代码提交**
  - [ ] 改动已测试通过
  - [ ] 代码格式符合规范
  - [ ] Commit Message 符合规范
  - [ ] 已推送到远程仓库

- [ ] **文档更新**
  - [ ] DevLog 已更新（记录新发现、决策、问题）
  - [ ] API 文档已更新（如有变更）
  - [ ] TODOs 已更新（标记完成的任务）

- [ ] **同步通知**
  - [ ] 团队成员已通知（如有协作）

---

## ⚡ 快速提示

### 📓 记得更新 DevLog 的场景

- 遇到技术难题并解决了
- 做了架构/设计决策
- 发现设计缺陷需要调整
- 有了新想法或灵感
- 踩坑了（教训也很重要）
- 性能优化或代码重构

### 📝 更新 DevLog 的步骤

1. 打开 `docs/03_Logs/DevLog.md`
2. 在对应日期下添加新条目
3. 使用分类标签：`[问题]` `[决策]` `[TODO]` `[灵感]` `[技术债]`
4. 记录上下文、思考过程、最终决策
5. 提交更改

### 🔄 同步 PRD 的场景

- 产品需求变更
- 新增功能模块
- 删除已有功能
- 交互流程调整
- 用户反馈导致设计变更

### 🔧 同步 API Design 的场景

- 数据库结构变更
- 新增 API 接口
- 接口参数调整
- 第三方服务配置变更

---

## 📈 进度统计

| 分类 | 总数 | 已完成 | 进行中 | 待开始 |
|-----|------|--------|--------|--------|
| 第一阶段 | 18 | **16** | 1 | 1 |
| 第二阶段 | 14 | **6** | 0 | 8 |
| 第三阶段| 32 | **18** | 0 | 14 |
| 第四阶段 | 12 | 0 | 0 | 12 |
| 第五阶段 | 14 | 0 | 0 | 14 |
| 第六阶段 | 13 | 1 | 1 | 11 |
| **总计** | **103** | **41** | **2** | **60** |

**完成率**: 约 40% (41/103)

---

## 📅 开发日历

| 日期 | 完成任务 | 备注 |
|-----|---------|------|
| 2026-01-28 | 项目目录结构搭建、文档体系建设 | ✅ |
| 2026-01-28 | 开发环境配置（Python + venv + 依赖安装） | ✅ |
| 2026-01-29 | 前端开发环境配置（React + Vite + TypeScript） | ✅ |
| 2026-01-30 | Git分支管理（创建dev分支、配置.gitignore） | ✅ |
| 2026-01-30 | 创建开发提示词文档系统 | ✅ |
| 2026-01-30 | Docker环境配置（PostgreSQL + Redis + pgAdmin） | ✅ |
| 2026-01-30 | 数据库表结构创建（9张核心表） | ✅ |
| 2026-01-30 | FastAPI后端项目搭建（9个数据库模型） | ✅ |
| 2026-01-30 | 用户认证系统实现（JWT Token） | ✅ |
| 2026-01-30 | 知识图谱和记忆节点 CRUD 接口 | ✅ |
| 2026-01-30 | 文件上传功能实现（本地存储 + OSS） | ✅ |
| 2026-01-30 | OCR 识别服务集成（百度 OCR） | ✅ |
| 2026-01-30 | AI 分析服务集成（DeepSeek + GPT-4） | ✅ |
| 2026-01-30 | 百度 OCR 和 DeepSeek API 配置 | ✅ |
| | | |

---

*本文档由 NeuralNote 开发团队维护*
*最后更新：2026-01-30 23:50*